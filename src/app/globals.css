@tailwind base;
@tailwind components;
@tailwind utilities;

/* JetBrains Mono と IBM Plex Mono フォントをインポート */
@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&family=JetBrains+Mono:wght@400;500;600&display=swap');

:root {
  --foreground-rgb: 0, 0, 0;
  --background-start-rgb: 214, 219, 220;
  --background-end-rgb: 255, 255, 255;
}

@media (prefers-color-scheme: dark) {
  :root {
    --foreground-rgb: 255, 255, 255;
    --background-start-rgb: 0, 0, 0;
    --background-end-rgb: 0, 0, 0;
  }
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 0 0% 3.9%;
    --card: 0 0% 100%;
    --card-foreground: 0 0% 3.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 3.9%;
    --primary: 0 0% 9%;
    --primary-foreground: 0 0% 98%;
    --secondary: 0 0% 96.1%;
    --secondary-foreground: 0 0% 9%;
    --muted: 0 0% 96.1%;
    --muted-foreground: 0 0% 45.1%;
    --accent: 0 0% 96.1%;
    --accent-foreground: 0 0% 9%;
    --accent-blue: 217 91% 60%;
    --accent-blue-foreground: 0 0% 100%;
    --success: 142 71% 45%;
    --success-foreground: 0 0% 100%;
    --warning: 38 92% 50%;
    --warning-foreground: 0 0% 9%;
    --error: 0 84% 60%;
    --error-foreground: 0 0% 98%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 89.8%;
    --input: 0 0% 89.8%;
    --ring: 0 0% 3.9%;
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
    --tv-grid: 232,232,232;
    --tv-bg: 255,255,255;
    --tv-crosshair: 118,134,150;
    --radius: 0.5rem;
  }
  .dark {
    /* HyperliquidライクなダークテーマカラーにさらにUpdate */
    --background: 200 47% 4%; /* #050f13 更に暗い青黒背景 */
    --foreground: 203 29% 84%; /* #C8D6E5 */
    --card: 198 47% 6%; /* #071318 */
    --card-foreground: 203 29% 84%; /* #C8D6E5 */
    --popover: 198 47% 6%; /* #071318 */
    --popover-foreground: 203 29% 84%; /* #C8D6E5 */
    --primary: 167 90% 46%; /* #0ddfba より鮮やかなティール系アクセント */
    --primary-foreground: 0 0% 98%; /* 白 */
    --secondary: 200 30% 10%; /* #0d1821 より暗い背景 */
    --secondary-foreground: 203 29% 84%; /* #C8D6E5 */
    --muted: 200 30% 10%; /* #0d1821 */
    --muted-foreground: 196 11% 60%; /* #8fa0aa 少し明るめテキスト */
    --accent: 200 30% 10%; /* #0d1821 */
    --accent-foreground: 203 29% 84%; /* #C8D6E5 */
    --accent-blue: 167 90% 46%; /* #0ddfba */
    --accent-blue-foreground: 0 0% 98%;
    --success: 167 90% 46%; /* #0ddfba 上昇色 */
    --success-foreground: 0 0% 98%;
    --warning: 45 100% 67%;
    --warning-foreground: 40 20% 20%;
    --error: 4 92% 63%; /* #ff4d4d 更にビビットな下降色 */
    --error-foreground: 0 0% 98%;
    --destructive: 4 92% 63%; /* #ff4d4d */
    --destructive-foreground: 0 0% 98%;
    --border: 200 30% 12%; /* #0e1a24 より暗い境界線 */
    --input: 200 30% 10%; /* #0d1821 */
    --ring: 167 90% 46%; /* #0ddfba */
    --chart-1: 167 90% 46%; /* #0ddfba ティール */
    --chart-2: 211 90% 65%; /* #5db3ff 明るい青 */
    --chart-3: 35 95% 65%; /* #ffcc33 明るい黄色 */
    --chart-4: 280 80% 65%; /* #d366ff 紫 */
    --chart-5: 340 90% 65%; /* #ff4d8c ピンク */
    --tv-grid: 200 30% 12%; /* #0e1a24 */
    --tv-bg: 200 47% 4%; /* #050f13 */
    --tv-crosshair: 196 11% 60%; /* #8fa0aa */
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground font-sans;
  }
}

@layer utilities {
  .font-mono-trading {
    font-family: 'JetBrains Mono', 'IBM Plex Mono', monospace;
    font-variant-numeric: tabular-nums;
    letter-spacing: -0.02em;
  }
}

@media (prefers-reduced-motion: reduce) {
  [class*='animate-'] {
    animation: none;
  }
}

/* チャート分析用のカスタムスタイル */
.chart-analysis {
  width: 100% !important;
  max-width: 100% !important;
  margin-bottom: 0.5rem;
}

.chart-analysis-text {
  width: 100%;
  overflow-x: visible;
  white-space: pre-wrap;
  word-break: break-word;
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.9rem;
  line-height: 1.5;
}

.chart-analysis-content {
  display: block;
  width: 100%;
}

/* チャート分析のセクションヘッダー */
.chart-analysis-text strong,
.chart-analysis-content strong {
  color: hsl(var(--primary));
  font-weight: 600;
}

/* チャート分析のハッシュタグ装飾 */
.chart-analysis-content:has(div):has(div) {
  width: 100%;
}

/* 古いブラウザのための代替スタイル */
.chart-analysis-content > div {
  width: 100%;
  max-width: 100%;
}

/* セクション区切り */
.chart-analysis-content h3,
.chart-analysis-text h3 {
  margin-top: 0.75rem;
  margin-bottom: 0.5rem;
  font-weight: 600;
  color: hsl(var(--accent-blue));
}

/* highlight.js のダークテーマスタイル */
.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  color: #abb2bf;
  background: #1e1e1e;
  border-radius: 0.375rem;
}

.hljs-comment,
.hljs-quote {
  color: #5c6370;
  font-style: italic;
}

.hljs-doctag,
.hljs-keyword,
.hljs-formula {
  color: #c678dd;
}

.hljs-section,
.hljs-name,
.hljs-selector-tag,
.hljs-deletion,
.hljs-subst {
  color: #e06c75;
}

.hljs-literal {
  color: #56b6c2;
}

.hljs-string,
.hljs-regexp,
.hljs-addition,
.hljs-attribute,
.hljs-meta .hljs-string {
  color: #98c379;
}

.hljs-attr,
.hljs-variable,
.hljs-template-variable,
.hljs-type,
.hljs-selector-class,
.hljs-selector-attr,
.hljs-selector-pseudo,
.hljs-number {
  color: #d19a66;
}

.hljs-symbol,
.hljs-bullet,
.hljs-link,
.hljs-meta,
.hljs-selector-id,
.hljs-title {
  color: #61aeee;
}

.hljs-built_in,
.hljs-title.class_,
.hljs-class .hljs-title {
  color: #e6c07b;
}

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: bold;
}

.hljs-link {
  text-decoration: underline;
}

/* インラインコードのスタイル */
.inline-code {
  background-color: rgba(0, 0, 0, 0.1);
  border-radius: 0.25rem;
  padding: 0.125rem 0.25rem;
  font-family: 'Fira Code', 'Monaco', 'Cascadia Code', 'Roboto Mono', monospace;
  font-size: 0.875em;
  color: #e06c75;
}

/* ダークモード時のインラインコード */
.dark .inline-code {
  background-color: rgba(255, 255, 255, 0.1);
  color: #61aeee;
}

/* マークダウン用のスタイル - ChatGPTライクなタイトスペーシング */
.markdown-content {
  line-height: 1.6;
  font-size: 0.925rem; /* ChatGPTライクなサイズに調整 */
  color: inherit;
}

.markdown-content h1,
.markdown-content h2,
.markdown-content h3,
.markdown-content h4,
.markdown-content h5,
.markdown-content h6 {
  margin-top: 1rem; /* 上マージンを縮小 (1.5rem → 1rem) */
  margin-bottom: 0.375rem; /* 下マージンを縮小 (0.5rem → 0.375rem) */
  font-weight: 600;
  line-height: 1.3; /* ヘッダーのライン高を縮小 */
}

.markdown-content h1 {
  font-size: 1.375rem; /* 少し小さく (1.5rem → 1.375rem) */
}

.markdown-content h2 {
  font-size: 1.125rem; /* 少し小さく (1.25rem → 1.125rem) */
}

.markdown-content h3 {
  font-size: 1rem; /* 少し小さく (1.125rem → 1rem) */
}

.markdown-content h4 {
  font-size: 0.9rem;
}

.markdown-content p {
  margin-bottom: 0.625rem; /* 段落間隔を縮小 (1rem → 0.625rem) */
  line-height: 1.5; /* ライン高を少し縮小 */
}

.markdown-content ul,
.markdown-content ol {
  margin-bottom: 0.75rem; /* リストマージンを縮小 (1rem → 0.75rem) */
  padding-left: 1.25rem; /* 左パディングを縮小 (1.5rem → 1.25rem) */
  margin-top: 0.375rem; /* 上マージンを追加 */
}

.markdown-content li {
  margin-bottom: 0.125rem; /* リスト項目間隔を縮小 (0.25rem → 0.125rem) */
  line-height: 1.4;
}

/* ネストされたリストの間隔をさらに縮小 */
.markdown-content li > ul,
.markdown-content li > ol {
  margin-top: 0.125rem;
  margin-bottom: 0.25rem;
}

.markdown-content blockquote {
  border-left: 3px solid #e5e5e5; /* ボーダーを細く */
  padding-left: 0.75rem; /* パディングを縮小 (1rem → 0.75rem) */
  margin: 0.75rem 0; /* マージンを縮小 (1rem → 0.75rem) */
  color: #6b7280;
  font-style: italic;
  line-height: 1.5;
}

.dark .markdown-content blockquote {
  border-left-color: #4b5563;
  color: #9ca3af;
}

.markdown-content table {
  width: 100%;
  border-collapse: collapse;
  margin: 0.75rem 0; /* マージンを縮小 (1rem → 0.75rem) */
  font-size: 0.9rem; /* テーブルフォントサイズを小さく */
}

.markdown-content th,
.markdown-content td {
  border: 1px solid #e5e5e5;
  padding: 0.375rem 0.5rem; /* パディングを調整 */
  text-align: left;
  line-height: 1.4;
}

.markdown-content th {
  background-color: #f9f9f9;
  font-weight: 600;
  font-size: 0.875rem;
}

.dark .markdown-content th,
.dark .markdown-content td {
  border-color: #4b5563;
}

.dark .markdown-content th {
  background-color: #374151;
}

.markdown-content pre {
  margin: 0.75rem 0; /* マージンを縮小 (1rem → 0.75rem) */
  overflow-x: auto;
  font-size: 0.875rem; /* コードブロックフォントサイズを小さく */
}

.markdown-content code {
  font-family: 'Fira Code', 'Monaco', 'Cascadia Code', 'Roboto Mono', monospace;
  font-size: 0.875em; /* インラインコードサイズを調整 */
}

/* 強調表示の調整 */
.markdown-content strong {
  font-weight: 600;
}

.markdown-content em {
  font-style: italic;
}

/* 最初の要素の上マージンを削除 */
.markdown-content > *:first-child {
  margin-top: 0;
}

/* 最後の要素の下マージンを削除 */
.markdown-content > *:last-child {
  margin-bottom: 0;
}

/* ChatGPTライクなより細かい調整 */
.markdown-content hr {
  margin: 0.75rem 0;
  border: none;
  border-top: 1px solid #e5e5e5;
}

.dark .markdown-content hr {
  border-top-color: #4b5563;
}

/* コードブロックとテキストの間隔調整 */
.markdown-content p + pre,
.markdown-content pre + p {
  margin-top: 0.5rem;
}

/* リスト項目内の段落のマージン調整 */
.markdown-content li > p {
  margin-bottom: 0.375rem;
}

.markdown-content li > p:last-child {
  margin-bottom: 0;
}

/* 見出し直後の要素の上マージン調整 */
.markdown-content h1 + *,
.markdown-content h2 + *,
.markdown-content h3 + *,
.markdown-content h4 + *,
.markdown-content h5 + *,
.markdown-content h6 + * {
  margin-top: 0.25rem;
}

/* リンクのスタイル */
.markdown-content a {
  color: hsl(var(--accent-blue));
  text-decoration: underline;
  text-underline-offset: 2px;
}

.markdown-content a:hover {
  opacity: 0.8;
}
